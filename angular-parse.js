!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){r(2),r(3),e.exports=r(1).name},function(e,t,r){var n=r(4);e.exports=n.module("ngParse",[])},function(e,t){e.exports=window.Parse},function(e,t,r){function n(){function e(t,r){return t instanceof o.Object?(r instanceof Array||(r=Array.prototype.slice.call(arguments,1)),void r.forEach(function(e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){this.set(e,t)},configurable:!0,enumerable:!0})})):"function"==typeof t?e(t.prototype,r):(r=t instanceof Array?t:Array.prototype.slice.call(arguments,0),function(t){e(t,r)})}function t(e){function t(e,r){return e._rejected=r._rejected,e._rejectedCallbacks=r._rejectedCallbacks,e._resolved=r._resolved,e._resolvedCallbacks=r._resolvedCallbacks,e._result=r._result,e.reject=r.reject,e.resolve=r.resolve,["_continueWith","_thenRunCallbacks","always","done","fail"].forEach(function(t){e[t]=n(r[t])}),["then","catch"].forEach(function(n){var o=e[n];e[n]=function(){var e=Array.prototype.slice.call(arguments,0),n=o.apply(this,e);return t(n,r),n}}),e}function n(r){return function(){var n=Array.prototype.slice.call(arguments,0),o=r.apply(this,n),c=e(o.then.bind(o));return t(c,o),c}}function o(e,t){t instanceof Array||(t=Array.prototype.slice.call(arguments,1)),t.forEach(function(t){e[t]=n(e[t])})}return r.wrapObject=o,o(r.Cloud,["run"]),o(r.Config,["get"]),o(r.FacebookUtils,["link","logIn","unlink"]),o(r.File.prototype,["save"]),o(r.Object,["destroyAll","fetchAll","fetchAllIfNeeded","saveAll"]),o(r.Object.prototype,["destroy","fetch","save"]),o(r.Promise,["_continueWhile","as","error","when"]),o(r.Push,["send"]),o(r.Query.prototype,["count","each","find","first","get"]),o(r.Session,["current"]),o(r.User,["become","currentAsync","enableRevocableSession","logIn","logOut","requestPasswordReset","signUp"]),o(r.User.prototype,["logIn","signUp"]),r}var r=Object.create(o);Object.defineProperty(r.Object.prototype,"$id",{get:function(){return void 0===this.$$id||null===this.$$id?this.id:this.$$id},set:function(e){this.$$id=e},configurable:!0,enumerable:!1}),e(r.User,["email","password","username"]);var n=r;return n.defineAttributes=e,n.$get=t,t.$inject=["$q"],n}var o=r(2),c=r(1);n.$inject=[],c.provider("Parse",n)},function(e,t){e.exports=window.angular}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYW5ndWxhci1wYXJzZS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNzllMTgzMDYwZGE0M2VjNzEzZTUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwid2luZG93LlBhcnNlXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL1BhcnNlLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIndpbmRvdy5hbmd1bGFyXCIiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwibmFtZSIsImFuZ3VsYXIiLCJ3aW5kb3ciLCJQYXJzZSIsIlBhcnNlUHJvdmlkZXIiLCJkZWZpbmVBdHRyaWJ1dGVzIiwib2JqZWN0IiwiYXR0cmlidXRlcyIsIk9iamVjdCIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJhcmd1bWVudHMiLCJmb3JFYWNoIiwiYXR0cmlidXRlIiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJ0aGlzIiwic2V0IiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwidGFyZ2V0IiwiUGFyc2VGYWN0b3J5IiwiJHEiLCJ3cmFwUGFyc2VQcm9taXNlIiwicHJvbWlzZSIsInBhcnNlUHJvbWlzZSIsIl9yZWplY3RlZCIsIl9yZWplY3RlZENhbGxiYWNrcyIsIl9yZXNvbHZlZCIsIl9yZXNvbHZlZENhbGxiYWNrcyIsIl9yZXN1bHQiLCJyZWplY3QiLCJyZXNvbHZlIiwibWV0aG9kIiwid3JhcCIsImZ1bmMiLCJhcmdzIiwiYXBwbHkiLCJ0aGVuIiwiYmluZCIsIndyYXBPYmplY3QiLCJtZXRob2RzIiwiQW5ndWxhclBhcnNlIiwiQ2xvdWQiLCJDb25maWciLCJGYWNlYm9va1V0aWxzIiwiRmlsZSIsIlByb21pc2UiLCJQdXNoIiwiUXVlcnkiLCJTZXNzaW9uIiwiVXNlciIsImNyZWF0ZSIsInVuZGVmaW5lZCIsIiQkaWQiLCJwcm92aWRlciIsIiRnZXQiLCIkaW5qZWN0IiwibmdQYXJzZU1vZHVsZSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsR0U1Q2hDQSxFQUFBLEdBQ0FBLEVBQUEsR0FDQUksRUFBQUQsUUFBQUgsRUFBQSxHQUFBVyxNRm1ETSxTQUFTUCxFQUFRRCxFQUFTSCxHR3JEaEMsR0FBQVksR0FBQVosRUFBQSxFQVNBSSxHQUFBRCxRQUFBUyxFQUFBUixPQUFBLGVINERNLFNBQVNBLEVBQVFELEdJckV2QkMsRUFBQUQsUUFBQVUsT0FBQUMsT0oyRU0sU0FBU1YsRUFBUUQsRUFBU0gsR0toRWhDLFFBQUFlLEtBV0EsUUFBQUMsR0FBQUMsRUFBQUMsR0FDQSxNQUFBRCxhQUFBSCxHQUFBSyxRQUNBRCxZQUFBRSxTQUFBRixFQUFBRSxNQUFBQyxVQUFBQyxNQUFBZixLQUFBZ0IsVUFBQSxRQUNBTCxHQUFBTSxRQUFBLFNBQUFDLEdBQ0FOLE9BQUFPLGVBQUFULEVBQUFRLEdBQ0FFLElBQUEsV0FDQSxNQUFBQyxNQUFBRCxJQUFBRixJQUVBSSxJQUFBLFNBQUFDLEdBQ0FGLEtBQUFDLElBQUFKLEVBQUFLLElBRUFDLGNBQUEsRUFDQUMsWUFBQSxPQUdLLGtCQUFBZixHQUNMRCxFQUFBQyxFQUFBSSxVQUFBSCxJQUVBQSxFQUFBRCxZQUFBRyxPQUFBSCxFQUNBRyxNQUFBQyxVQUFBQyxNQUFBZixLQUFBZ0IsVUFBQSxHQUNBLFNBQUFVLEdBQ0FqQixFQUFBaUIsRUFBQWYsS0E2Q0EsUUFBQWdCLEdBQUFDLEdBUUEsUUFBQUMsR0FBQUMsRUFBQUMsR0F1QkEsTUF0QkFELEdBQUFFLFVBQUFELEVBQUFDLFVBQ0FGLEVBQUFHLG1CQUFBRixFQUFBRSxtQkFDQUgsRUFBQUksVUFBQUgsRUFBQUcsVUFDQUosRUFBQUssbUJBQUFKLEVBQUFJLG1CQUNBTCxFQUFBTSxRQUFBTCxFQUFBSyxRQUNBTixFQUFBTyxPQUFBTixFQUFBTSxPQUNBUCxFQUFBUSxRQUFBUCxFQUFBTyxTQUVBLDREQUFBckIsUUFBQSxTQUFBc0IsR0FDQVQsRUFBQVMsR0FBQUMsRUFBQVQsRUFBQVEsT0FHQSxnQkFBQXRCLFFBQUEsU0FBQXNCLEdBQ0EsR0FBQUUsR0FBQVgsRUFBQVMsRUFDQVQsR0FBQVMsR0FBQSxXQUNBLEdBQUFHLEdBQUE3QixNQUFBQyxVQUFBQyxNQUFBZixLQUFBZ0IsVUFBQSxHQUNBYyxFQUFBVyxFQUFBRSxNQUFBdEIsS0FBQXFCLEVBRUEsT0FEQWIsR0FBQUMsRUFBQUMsR0FDQUQsS0FJQUEsRUFVQSxRQUFBVSxHQUFBQyxHQUNBLGtCQUNBLEdBQUFDLEdBQUE3QixNQUFBQyxVQUFBQyxNQUFBZixLQUFBZ0IsVUFBQSxHQUNBZSxFQUFBVSxFQUFBRSxNQUFBdEIsS0FBQXFCLEdBQ0FaLEVBQUFGLEVBQUFHLEVBQUFhLEtBQUFDLEtBQUFkLEdBRUEsT0FEQUYsR0FBQUMsRUFBQUMsR0FDQUQsR0FVQSxRQUFBZ0IsR0FBQXBDLEVBQUFxQyxHQUNBQSxZQUFBbEMsU0FBQWtDLEVBQUFsQyxNQUFBQyxVQUFBQyxNQUFBZixLQUFBZ0IsVUFBQSxJQUNBK0IsRUFBQTlCLFFBQUEsU0FBQXNCLEdBQ0E3QixFQUFBNkIsR0FBQUMsRUFBQTlCLEVBQUE2QixNQTZDQSxNQWxDQVMsR0FBQUYsYUFHQUEsRUFBQUUsRUFBQUMsT0FBQSxRQUdBSCxFQUFBRSxFQUFBRSxRQUFBLFFBR0FKLEVBQUFFLEVBQUFHLGVBQUEsMEJBR0FMLEVBQUFFLEVBQUFJLEtBQUF0QyxXQUFBLFNBR0FnQyxFQUFBRSxFQUFBcEMsUUFBQSx1REFDQWtDLEVBQUFFLEVBQUFwQyxPQUFBRSxXQUFBLDJCQUdBZ0MsRUFBQUUsRUFBQUssU0FBQSx1Q0FHQVAsRUFBQUUsRUFBQU0sTUFBQSxTQUdBUixFQUFBRSxFQUFBTyxNQUFBekMsV0FBQSxzQ0FHQWdDLEVBQUFFLEVBQUFRLFNBQUEsWUFHQVYsRUFBQUUsRUFBQVMsTUFBQSxvR0FDQVgsRUFBQUUsRUFBQVMsS0FBQTNDLFdBQUEsbUJBRUFrQyxFQWhKQSxHQUFBQSxHQUFBcEMsT0FBQThDLE9BQUFuRCxFQUdBSyxRQUFBTyxlQUFBNkIsRUFBQXBDLE9BQUFFLFVBQUEsT0FDQU0sSUFBQSxXQUNBLE1BQUF1QyxVQUFBdEMsS0FBQXVDLE1BQUEsT0FBQXZDLEtBQUF1QyxLQUFBdkMsS0FBQXZCLEdBQUF1QixLQUFBdUMsTUFFQXRDLElBQUEsU0FBQUMsR0FDQUYsS0FBQXVDLEtBQUFyQyxHQUVBQyxjQUFBLEVBQ0FDLFlBQUEsSUFJQWhCLEVBQUF1QyxFQUFBUyxNQUFBLCtCQUVBLElBQUFJLEdBQUFiLENBa0lBLE9BekhBYSxHQUFBcEQsbUJBV0FvRCxFQUFBQyxLQUFBbkMsRUFDQUEsRUFBQW9DLFNBQUEsTUE2R0FGLEVBcE1BLEdBQUF0RCxHQUFBZCxFQUFBLEdBQ0F1RSxFQUFBdkUsRUFBQSxFQVNBZSxHQUFBdUQsV0E2TEFDLEVBQ0FILFNBQUEsUUFBQXJELElMa0ZNLFNBQVNYLEVBQVFELEdNMVJ2QkMsRUFBQUQsUUFBQVUsT0FBQUQiLCJmaWxlIjoiYW5ndWxhci1wYXJzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xyXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKS5uYW1lO1xyXG5cblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBhbmd1bGFyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxuXHRcclxuXHQvKipcclxuXHQgKiBAbmdkb2Mgb3ZlcnZpZXdcclxuXHQgKiBAbmFtZSBuZ1BhcnNlXHJcblx0ICpcclxuXHQgKiBAZGVzY3JpcHRpb25cclxuXHQgKiBBbmd1bGFyIHdyYXBwZXIgZm9yIFtQYXJzZS5jb20gSmF2YVNjcmlwdCBTREtde0BsaW5rIGh0dHBzOi8vcGFyc2UuY29tL2RvY3MvanMvYXBpL30uXHJcblx0ICovXHJcblx0bW9kdWxlLmV4cG9ydHMgPSBhbmd1bGFyLm1vZHVsZSgnbmdQYXJzZScsIFtdKTtcclxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5QYXJzZTtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBQYXJzZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcblx0dmFyIG5nUGFyc2VNb2R1bGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEBuZ2RvYyBvYmplY3RcclxuXHQgKiBAbmFtZSBuZ1BhcnNlLlBhcnNlUHJvdmlkZXJcclxuXHQgKlxyXG5cdCAqIEBkZXNjcmlwdGlvblxyXG5cdCAqIFByb3ZpZGVyIGZvciBQYXJzZSBzZXJ2aWNlLlxyXG5cdCAqL1xyXG5cdFBhcnNlUHJvdmlkZXIuJGluamVjdCA9IFtdO1xyXG5cdGZ1bmN0aW9uIFBhcnNlUHJvdmlkZXIoKSB7XHJcblx0ICAvKipcclxuXHQgICAqIERlZmluZXMgZ2V0dGVycyBhbmQgc2V0dGVycyBmb3IgdGhlIGF0dHJpYnV0ZXNcclxuXHQgICAqIG9mIHRoZSBnaXZlbiBvYmplY3Qgb3IgZnVuY3Rpb24gcHJvdG90eXBlLlxyXG5cdCAgICogT3IgY3JlYXRlIGEgZGVjb3JhdG9yIHRoYXQgZGVmaW5lcyBnZXR0ZXJzXHJcblx0ICAgKiBhbmQgc2V0dGVycyBmb3IgdGhlIHN1YmNsYXNzIFBhcnNlLk9iamVjdC5cclxuXHQgICAqXHJcblx0ICAgKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbnxTdHJpbmd8U3RyaW5nW119IG9iamVjdFxyXG5cdCAgICogQHBhcmFtIHsuLi5TdHJpbmd8U3RyaW5nW109fSBhdHRyaWJ1dGVzXHJcblx0ICAgKiBAcmV0dXJucyB7Kn1cclxuXHQgICAqL1xyXG5cdCAgZnVuY3Rpb24gZGVmaW5lQXR0cmlidXRlcyhvYmplY3QsIGF0dHJpYnV0ZXMpIHtcclxuXHQgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFBhcnNlLk9iamVjdCkge1xyXG5cdCAgICAgIGlmICghKGF0dHJpYnV0ZXMgaW5zdGFuY2VvZiBBcnJheSkpIGF0dHJpYnV0ZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xyXG5cdCAgICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbiAoYXR0cmlidXRlKSB7XHJcblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBhdHRyaWJ1dGUsIHtcclxuXHQgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KGF0dHJpYnV0ZSk7XHJcblx0ICAgICAgICAgIH0sXHJcblx0ICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0ICAgICAgICAgICAgdGhpcy5zZXQoYXR0cmlidXRlLCB2YWx1ZSk7XHJcblx0ICAgICAgICAgIH0sXHJcblx0ICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuXHQgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZVxyXG5cdCAgICAgICAgfSk7XHJcblx0ICAgICAgfSk7XHJcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iamVjdCA9PSAnZnVuY3Rpb24nKSB7XHJcblx0ICAgICAgcmV0dXJuIGRlZmluZUF0dHJpYnV0ZXMob2JqZWN0LnByb3RvdHlwZSwgYXR0cmlidXRlcylcclxuXHQgICAgfSBlbHNlIHtcclxuXHQgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQXJyYXkpIGF0dHJpYnV0ZXMgPSBvYmplY3Q7XHJcblx0ICAgICAgZWxzZSBhdHRyaWJ1dGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcclxuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gZGVmaW5lQXR0cmlidXRlc0RlY29yYXRvcih0YXJnZXQpIHtcclxuXHQgICAgICAgIGRlZmluZUF0dHJpYnV0ZXModGFyZ2V0LCBhdHRyaWJ1dGVzKTtcclxuXHQgICAgICB9XHJcblx0ICAgIH1cclxuXHQgIH1cclxuXHRcclxuXHQgIC8vIFBhcnNlXHJcblx0ICB2YXIgQW5ndWxhclBhcnNlID0gT2JqZWN0LmNyZWF0ZShQYXJzZSk7XHJcblx0XHJcblx0ICAvLyBQYXJzZU9iamVjdFxyXG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEFuZ3VsYXJQYXJzZS5PYmplY3QucHJvdG90eXBlLCAnJGlkJywge1xyXG5cdCAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICByZXR1cm4gdGhpcy4kJGlkID09PSB1bmRlZmluZWQgfHwgdGhpcy4kJGlkID09PSBudWxsID8gdGhpcy5pZCA6IHRoaXMuJCRpZDtcclxuXHQgICAgfSxcclxuXHQgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuXHQgICAgICB0aGlzLiQkaWQgPSB2YWx1ZTtcclxuXHQgICAgfSxcclxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG5cdCAgICBlbnVtZXJhYmxlOiBmYWxzZVxyXG5cdCAgfSk7XHJcblx0XHJcblx0ICAvLyBQYXJzZVVzZXJcclxuXHQgIGRlZmluZUF0dHJpYnV0ZXMoQW5ndWxhclBhcnNlLlVzZXIsIFsnZW1haWwnLCAncGFzc3dvcmQnLCAndXNlcm5hbWUnXSk7XHJcblx0XHJcblx0ICB2YXIgcHJvdmlkZXIgPSBBbmd1bGFyUGFyc2U7XHJcblx0XHJcblx0ICAvKipcclxuXHQgICAqIEBuZ2RvYyBtZXRob2RcclxuXHQgICAqIEBuYW1lIG5nUGFyc2UuUGFyc2VQcm92aWRlciNkZWZpbmVBdHRyaWJ1dGVzXHJcblx0ICAgKiBAbWV0aG9kT2YgbmdQYXJzZS5QYXJzZVByb3ZpZGVyXHJcblx0ICAgKiBAc3RhdGljXHJcblx0ICAgKiBAc2VlIHtAbGluayBkZWZpbmVBdHRyaWJ1dGVzfVxyXG5cdCAgICovXHJcblx0ICBwcm92aWRlci5kZWZpbmVBdHRyaWJ1dGVzID0gZGVmaW5lQXR0cmlidXRlcztcclxuXHRcclxuXHQgIC8qKlxyXG5cdCAgICogQG5nZG9jIHNlcnZpY2VcclxuXHQgICAqIEBuYW1lIG5nUGFyc2UuUGFyc2VcclxuXHQgICAqXHJcblx0ICAgKiBAcmVxdWlyZXMgJHFcclxuXHQgICAqXHJcblx0ICAgKiBAZGVzY3JpcHRpb25cclxuXHQgICAqIFRoaXMgaXMgYSB3cmFwcGVyIGZvciBbUGFyc2Vde0BsaW5rIGh0dHBzOi8vcGFyc2UuY29tL2RvY3MvanMvYXBpL2NsYXNzZXMvUGFyc2UuaHRtbH0uXHJcblx0ICAgKi9cclxuXHQgIHByb3ZpZGVyLiRnZXQgPSBQYXJzZUZhY3Rvcnk7XHJcblx0ICBQYXJzZUZhY3RvcnkuJGluamVjdCA9IFsnJHEnXTtcclxuXHQgIGZ1bmN0aW9uIFBhcnNlRmFjdG9yeSgkcSkge1xyXG5cdCAgICAvKipcclxuXHQgICAgICogV3JhcHMgUHJvbWlzZS5cclxuXHQgICAgICpcclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IHByb21pc2VcclxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IHBhcnNlUHJvbWlzZVxyXG5cdCAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG5cdCAgICAgKi9cclxuXHQgICAgZnVuY3Rpb24gd3JhcFBhcnNlUHJvbWlzZShwcm9taXNlLCBwYXJzZVByb21pc2UpIHtcclxuXHQgICAgICBwcm9taXNlLl9yZWplY3RlZCA9IHBhcnNlUHJvbWlzZS5fcmVqZWN0ZWQ7XHJcblx0ICAgICAgcHJvbWlzZS5fcmVqZWN0ZWRDYWxsYmFja3MgPSBwYXJzZVByb21pc2UuX3JlamVjdGVkQ2FsbGJhY2tzO1xyXG5cdCAgICAgIHByb21pc2UuX3Jlc29sdmVkID0gcGFyc2VQcm9taXNlLl9yZXNvbHZlZDtcclxuXHQgICAgICBwcm9taXNlLl9yZXNvbHZlZENhbGxiYWNrcyA9IHBhcnNlUHJvbWlzZS5fcmVzb2x2ZWRDYWxsYmFja3M7XHJcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gcGFyc2VQcm9taXNlLl9yZXN1bHQ7XHJcblx0ICAgICAgcHJvbWlzZS5yZWplY3QgPSBwYXJzZVByb21pc2UucmVqZWN0O1xyXG5cdCAgICAgIHByb21pc2UucmVzb2x2ZSA9IHBhcnNlUHJvbWlzZS5yZXNvbHZlO1xyXG5cdFxyXG5cdCAgICAgIFsnX2NvbnRpbnVlV2l0aCcsICdfdGhlblJ1bkNhbGxiYWNrcycsICdhbHdheXMnLCAnZG9uZScsICdmYWlsJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XHJcblx0ICAgICAgICBwcm9taXNlW21ldGhvZF0gPSB3cmFwKHBhcnNlUHJvbWlzZVttZXRob2RdKTtcclxuXHQgICAgICB9KTtcclxuXHRcclxuXHQgICAgICBbJ3RoZW4nLCAnY2F0Y2gnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcclxuXHQgICAgICAgIHZhciBmdW5jID0gcHJvbWlzZVttZXRob2RdO1xyXG5cdCAgICAgICAgcHJvbWlzZVttZXRob2RdID0gZnVuY3Rpb24gd3JhcHBlZEFuZ3VsYXJQcm9taXNlKCkge1xyXG5cdCAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XHJcblx0ICAgICAgICAgIHZhciBwcm9taXNlID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcclxuXHQgICAgICAgICAgd3JhcFBhcnNlUHJvbWlzZShwcm9taXNlLCBwYXJzZVByb21pc2UpO1xyXG5cdCAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuXHQgICAgICAgIH07XHJcblx0ICAgICAgfSk7XHJcblx0XHJcblx0ICAgICAgcmV0dXJuIHByb21pc2U7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgLyoqXHJcblx0ICAgICAqIFdyYXBzIGZ1bmN0aW9uLlxyXG5cdCAgICAgKlxyXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIEZ1bmN0aW9uIHRoYXQgcmV0dXJuc1xyXG5cdCAgICAgKiBbUGFyc2UuUHJvbWlzZV17QGxpbmsgaHR0cHM6Ly9wYXJzZS5jb20vZG9jcy9qcy9hcGkvY2xhc3Nlcy9QYXJzZS5Qcm9taXNlLmh0bWx9LlxyXG5cdCAgICAgKiBAcmV0dXJucyB7RnVuY3Rpb259IEZ1bmN0aW9uIHRoYXQgcmV0dXJucyAkcSBwcm9taXNlcy5cclxuXHQgICAgICovXHJcblx0ICAgIGZ1bmN0aW9uIHdyYXAoZnVuYykge1xyXG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiB3cmFwcGVkUGFyc2VQcm9taXNlKCkge1xyXG5cdCAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xyXG5cdCAgICAgICAgdmFyIHBhcnNlUHJvbWlzZSA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XHJcblx0ICAgICAgICB2YXIgcHJvbWlzZSA9ICRxKHBhcnNlUHJvbWlzZS50aGVuLmJpbmQocGFyc2VQcm9taXNlKSk7XHJcblx0ICAgICAgICB3cmFwUGFyc2VQcm9taXNlKHByb21pc2UsIHBhcnNlUHJvbWlzZSk7XHJcblx0ICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuXHQgICAgICB9O1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBXcmFwcyBvYmplY3QuXHJcblx0ICAgICAqXHJcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3RcclxuXHQgICAgICogQHBhcmFtIHsuLi5TdHJpbmd8U3RyaW5nW109fSBtZXRob2RzXHJcblx0ICAgICAqL1xyXG5cdCAgICBmdW5jdGlvbiB3cmFwT2JqZWN0KG9iamVjdCwgbWV0aG9kcykge1xyXG5cdCAgICAgIGlmICghKG1ldGhvZHMgaW5zdGFuY2VvZiBBcnJheSkpIG1ldGhvZHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xyXG5cdCAgICAgIG1ldGhvZHMuZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XHJcblx0ICAgICAgICBvYmplY3RbbWV0aG9kXSA9IHdyYXAob2JqZWN0W21ldGhvZF0pO1xyXG5cdCAgICAgIH0pO1xyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIC8qKlxyXG5cdCAgICAgKiBAbmdkb2MgbWV0aG9kXHJcblx0ICAgICAqIEBuYW1lIG5nUGFyc2UuUGFyc2Ujd3JhcE9iamVjdFxyXG5cdCAgICAgKiBAbWV0aG9kT2YgbmdQYXJzZS5QYXJzZVxyXG5cdCAgICAgKiBAc3RhdGljXHJcblx0ICAgICAqIEBzZWUge0BsaW5rIHdyYXBPYmplY3R9XHJcblx0ICAgICAqL1xyXG5cdCAgICBBbmd1bGFyUGFyc2Uud3JhcE9iamVjdCA9IHdyYXBPYmplY3Q7XHJcblx0XHJcblx0ICAgIC8vIFBhcnNlQ2xvdWRcclxuXHQgICAgd3JhcE9iamVjdChBbmd1bGFyUGFyc2UuQ2xvdWQsIFsncnVuJ10pO1xyXG5cdFxyXG5cdCAgICAvLyBQYXJzZUNvbmZpZ1xyXG5cdCAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5Db25maWcsIFsnZ2V0J10pO1xyXG5cdFxyXG5cdCAgICAvL0ZhY2Vib29rVXRpbHNcclxuXHQgICAgd3JhcE9iamVjdChBbmd1bGFyUGFyc2UuRmFjZWJvb2tVdGlscywgWydsaW5rJywgJ2xvZ0luJywgJ3VubGluayddKTtcclxuXHRcclxuXHQgICAgLy8gUGFyc2VGaWxlXHJcblx0ICAgIHdyYXBPYmplY3QoQW5ndWxhclBhcnNlLkZpbGUucHJvdG90eXBlLCBbJ3NhdmUnXSk7XHJcblx0XHJcblx0ICAgIC8vIFBhcnNlT2JqZWN0XHJcblx0ICAgIHdyYXBPYmplY3QoQW5ndWxhclBhcnNlLk9iamVjdCwgWydkZXN0cm95QWxsJywgJ2ZldGNoQWxsJywgJ2ZldGNoQWxsSWZOZWVkZWQnLCAnc2F2ZUFsbCddKTtcclxuXHQgICAgd3JhcE9iamVjdChBbmd1bGFyUGFyc2UuT2JqZWN0LnByb3RvdHlwZSwgWydkZXN0cm95JywgJ2ZldGNoJywgJ3NhdmUnXSk7XHJcblx0XHJcblx0ICAgIC8vIFBhcnNlUHJvbWlzZVxyXG5cdCAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5Qcm9taXNlLCBbJ19jb250aW51ZVdoaWxlJywgJ2FzJywgJ2Vycm9yJywgJ3doZW4nXSk7XHJcblx0XHJcblx0ICAgIC8vIFBhcnNlUHVzaFxyXG5cdCAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5QdXNoLCBbJ3NlbmQnXSk7XHJcblx0XHJcblx0ICAgIC8vIFBhcnNlUXVlcnlcclxuXHQgICAgd3JhcE9iamVjdChBbmd1bGFyUGFyc2UuUXVlcnkucHJvdG90eXBlLCBbJ2NvdW50JywgJ2VhY2gnLCAnZmluZCcsICdmaXJzdCcsICdnZXQnXSk7XHJcblx0XHJcblx0ICAgIC8vIFBhcnNlU2Vzc2lvblxyXG5cdCAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5TZXNzaW9uLCBbJ2N1cnJlbnQnXSk7XHJcblx0XHJcblx0ICAgIC8vIFBhcnNlVXNlclxyXG5cdCAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5Vc2VyLCBbJ2JlY29tZScsICdjdXJyZW50QXN5bmMnLCAnZW5hYmxlUmV2b2NhYmxlU2Vzc2lvbicsICdsb2dJbicsICdsb2dPdXQnLCAncmVxdWVzdFBhc3N3b3JkUmVzZXQnLCAnc2lnblVwJ10pO1xyXG5cdCAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5Vc2VyLnByb3RvdHlwZSwgWydsb2dJbicsICdzaWduVXAnXSk7XHJcblx0XHJcblx0ICAgIHJldHVybiBBbmd1bGFyUGFyc2U7XHJcblx0ICB9XHJcblx0XHJcblx0ICByZXR1cm4gcHJvdmlkZXI7XHJcblx0fVxyXG5cdFxyXG5cdG5nUGFyc2VNb2R1bGVcclxuXHQgIC5wcm92aWRlcignUGFyc2UnLCBQYXJzZVByb3ZpZGVyKTtcclxuXG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5hbmd1bGFyO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBhbmd1bGFyLXBhcnNlLmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCA3OWUxODMwNjBkYTQzZWM3MTNlNVxuICoqLyIsInJlcXVpcmUoJ3BhcnNlJyk7XHJcbnJlcXVpcmUoJy4vUGFyc2UuanMnKTtcclxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL21vZHVsZS5qcycpLm5hbWU7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxuXHJcbi8qKlxyXG4gKiBAbmdkb2Mgb3ZlcnZpZXdcclxuICogQG5hbWUgbmdQYXJzZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQW5ndWxhciB3cmFwcGVyIGZvciBbUGFyc2UuY29tIEphdmFTY3JpcHQgU0RLXXtAbGluayBodHRwczovL3BhcnNlLmNvbS9kb2NzL2pzL2FwaS99LlxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBhbmd1bGFyLm1vZHVsZSgnbmdQYXJzZScsIFtdKTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IHdpbmRvdy5QYXJzZTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwid2luZG93LlBhcnNlXCJcbiAqKiBtb2R1bGUgaWQgPSAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgUGFyc2UgPSByZXF1aXJlKCdwYXJzZScpO1xyXG52YXIgbmdQYXJzZU1vZHVsZSA9IHJlcXVpcmUoJy4vbW9kdWxlLmpzJyk7XHJcblxyXG4vKipcclxuICogQG5nZG9jIG9iamVjdFxyXG4gKiBAbmFtZSBuZ1BhcnNlLlBhcnNlUHJvdmlkZXJcclxuICpcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqIFByb3ZpZGVyIGZvciBQYXJzZSBzZXJ2aWNlLlxyXG4gKi9cclxuUGFyc2VQcm92aWRlci4kaW5qZWN0ID0gW107XHJcbmZ1bmN0aW9uIFBhcnNlUHJvdmlkZXIoKSB7XHJcbiAgLyoqXHJcbiAgICogRGVmaW5lcyBnZXR0ZXJzIGFuZCBzZXR0ZXJzIGZvciB0aGUgYXR0cmlidXRlc1xyXG4gICAqIG9mIHRoZSBnaXZlbiBvYmplY3Qgb3IgZnVuY3Rpb24gcHJvdG90eXBlLlxyXG4gICAqIE9yIGNyZWF0ZSBhIGRlY29yYXRvciB0aGF0IGRlZmluZXMgZ2V0dGVyc1xyXG4gICAqIGFuZCBzZXR0ZXJzIGZvciB0aGUgc3ViY2xhc3MgUGFyc2UuT2JqZWN0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb258U3RyaW5nfFN0cmluZ1tdfSBvYmplY3RcclxuICAgKiBAcGFyYW0gey4uLlN0cmluZ3xTdHJpbmdbXT19IGF0dHJpYnV0ZXNcclxuICAgKiBAcmV0dXJucyB7Kn1cclxuICAgKi9cclxuICBmdW5jdGlvbiBkZWZpbmVBdHRyaWJ1dGVzKG9iamVjdCwgYXR0cmlidXRlcykge1xyXG4gICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFBhcnNlLk9iamVjdCkge1xyXG4gICAgICBpZiAoIShhdHRyaWJ1dGVzIGluc3RhbmNlb2YgQXJyYXkpKSBhdHRyaWJ1dGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcclxuICAgICAgYXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChhdHRyaWJ1dGUpIHtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LCBhdHRyaWJ1dGUsIHtcclxuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQoYXR0cmlidXRlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldChhdHRyaWJ1dGUsIHZhbHVlKTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0ID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgcmV0dXJuIGRlZmluZUF0dHJpYnV0ZXMob2JqZWN0LnByb3RvdHlwZSwgYXR0cmlidXRlcylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBBcnJheSkgYXR0cmlidXRlcyA9IG9iamVjdDtcclxuICAgICAgZWxzZSBhdHRyaWJ1dGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlZmluZUF0dHJpYnV0ZXNEZWNvcmF0b3IodGFyZ2V0KSB7XHJcbiAgICAgICAgZGVmaW5lQXR0cmlidXRlcyh0YXJnZXQsIGF0dHJpYnV0ZXMpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBQYXJzZVxyXG4gIHZhciBBbmd1bGFyUGFyc2UgPSBPYmplY3QuY3JlYXRlKFBhcnNlKTtcclxuXHJcbiAgLy8gUGFyc2VPYmplY3RcclxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQW5ndWxhclBhcnNlLk9iamVjdC5wcm90b3R5cGUsICckaWQnLCB7XHJcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuJCRpZCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMuJCRpZCA9PT0gbnVsbCA/IHRoaXMuaWQgOiB0aGlzLiQkaWQ7XHJcbiAgICB9LFxyXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgdGhpcy4kJGlkID0gdmFsdWU7XHJcbiAgICB9LFxyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gICAgZW51bWVyYWJsZTogZmFsc2VcclxuICB9KTtcclxuXHJcbiAgLy8gUGFyc2VVc2VyXHJcbiAgZGVmaW5lQXR0cmlidXRlcyhBbmd1bGFyUGFyc2UuVXNlciwgWydlbWFpbCcsICdwYXNzd29yZCcsICd1c2VybmFtZSddKTtcclxuXHJcbiAgdmFyIHByb3ZpZGVyID0gQW5ndWxhclBhcnNlO1xyXG5cclxuICAvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgbmdQYXJzZS5QYXJzZVByb3ZpZGVyI2RlZmluZUF0dHJpYnV0ZXNcclxuICAgKiBAbWV0aG9kT2YgbmdQYXJzZS5QYXJzZVByb3ZpZGVyXHJcbiAgICogQHN0YXRpY1xyXG4gICAqIEBzZWUge0BsaW5rIGRlZmluZUF0dHJpYnV0ZXN9XHJcbiAgICovXHJcbiAgcHJvdmlkZXIuZGVmaW5lQXR0cmlidXRlcyA9IGRlZmluZUF0dHJpYnV0ZXM7XHJcblxyXG4gIC8qKlxyXG4gICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICogQG5hbWUgbmdQYXJzZS5QYXJzZVxyXG4gICAqXHJcbiAgICogQHJlcXVpcmVzICRxXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBUaGlzIGlzIGEgd3JhcHBlciBmb3IgW1BhcnNlXXtAbGluayBodHRwczovL3BhcnNlLmNvbS9kb2NzL2pzL2FwaS9jbGFzc2VzL1BhcnNlLmh0bWx9LlxyXG4gICAqL1xyXG4gIHByb3ZpZGVyLiRnZXQgPSBQYXJzZUZhY3Rvcnk7XHJcbiAgUGFyc2VGYWN0b3J5LiRpbmplY3QgPSBbJyRxJ107XHJcbiAgZnVuY3Rpb24gUGFyc2VGYWN0b3J5KCRxKSB7XHJcbiAgICAvKipcclxuICAgICAqIFdyYXBzIFByb21pc2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb21pc2VcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJzZVByb21pc2VcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHdyYXBQYXJzZVByb21pc2UocHJvbWlzZSwgcGFyc2VQcm9taXNlKSB7XHJcbiAgICAgIHByb21pc2UuX3JlamVjdGVkID0gcGFyc2VQcm9taXNlLl9yZWplY3RlZDtcclxuICAgICAgcHJvbWlzZS5fcmVqZWN0ZWRDYWxsYmFja3MgPSBwYXJzZVByb21pc2UuX3JlamVjdGVkQ2FsbGJhY2tzO1xyXG4gICAgICBwcm9taXNlLl9yZXNvbHZlZCA9IHBhcnNlUHJvbWlzZS5fcmVzb2x2ZWQ7XHJcbiAgICAgIHByb21pc2UuX3Jlc29sdmVkQ2FsbGJhY2tzID0gcGFyc2VQcm9taXNlLl9yZXNvbHZlZENhbGxiYWNrcztcclxuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gcGFyc2VQcm9taXNlLl9yZXN1bHQ7XHJcbiAgICAgIHByb21pc2UucmVqZWN0ID0gcGFyc2VQcm9taXNlLnJlamVjdDtcclxuICAgICAgcHJvbWlzZS5yZXNvbHZlID0gcGFyc2VQcm9taXNlLnJlc29sdmU7XHJcblxyXG4gICAgICBbJ19jb250aW51ZVdpdGgnLCAnX3RoZW5SdW5DYWxsYmFja3MnLCAnYWx3YXlzJywgJ2RvbmUnLCAnZmFpbCddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xyXG4gICAgICAgIHByb21pc2VbbWV0aG9kXSA9IHdyYXAocGFyc2VQcm9taXNlW21ldGhvZF0pO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIFsndGhlbicsICdjYXRjaCddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xyXG4gICAgICAgIHZhciBmdW5jID0gcHJvbWlzZVttZXRob2RdO1xyXG4gICAgICAgIHByb21pc2VbbWV0aG9kXSA9IGZ1bmN0aW9uIHdyYXBwZWRBbmd1bGFyUHJvbWlzZSgpIHtcclxuICAgICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcclxuICAgICAgICAgIHZhciBwcm9taXNlID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgIHdyYXBQYXJzZVByb21pc2UocHJvbWlzZSwgcGFyc2VQcm9taXNlKTtcclxuICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXcmFwcyBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIEZ1bmN0aW9uIHRoYXQgcmV0dXJuc1xyXG4gICAgICogW1BhcnNlLlByb21pc2Vde0BsaW5rIGh0dHBzOi8vcGFyc2UuY29tL2RvY3MvanMvYXBpL2NsYXNzZXMvUGFyc2UuUHJvbWlzZS5odG1sfS5cclxuICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCByZXR1cm5zICRxIHByb21pc2VzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiB3cmFwKGZ1bmMpIHtcclxuICAgICAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZWRQYXJzZVByb21pc2UoKSB7XHJcbiAgICAgICAgdmFyIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xyXG4gICAgICAgIHZhciBwYXJzZVByb21pc2UgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgIHZhciBwcm9taXNlID0gJHEocGFyc2VQcm9taXNlLnRoZW4uYmluZChwYXJzZVByb21pc2UpKTtcclxuICAgICAgICB3cmFwUGFyc2VQcm9taXNlKHByb21pc2UsIHBhcnNlUHJvbWlzZSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXcmFwcyBvYmplY3QuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxyXG4gICAgICogQHBhcmFtIHsuLi5TdHJpbmd8U3RyaW5nW109fSBtZXRob2RzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHdyYXBPYmplY3Qob2JqZWN0LCBtZXRob2RzKSB7XHJcbiAgICAgIGlmICghKG1ldGhvZHMgaW5zdGFuY2VvZiBBcnJheSkpIG1ldGhvZHMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xyXG4gICAgICBtZXRob2RzLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xyXG4gICAgICAgIG9iamVjdFttZXRob2RdID0gd3JhcChvYmplY3RbbWV0aG9kXSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICogQG5hbWUgbmdQYXJzZS5QYXJzZSN3cmFwT2JqZWN0XHJcbiAgICAgKiBAbWV0aG9kT2YgbmdQYXJzZS5QYXJzZVxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHNlZSB7QGxpbmsgd3JhcE9iamVjdH1cclxuICAgICAqL1xyXG4gICAgQW5ndWxhclBhcnNlLndyYXBPYmplY3QgPSB3cmFwT2JqZWN0O1xyXG5cclxuICAgIC8vIFBhcnNlQ2xvdWRcclxuICAgIHdyYXBPYmplY3QoQW5ndWxhclBhcnNlLkNsb3VkLCBbJ3J1biddKTtcclxuXHJcbiAgICAvLyBQYXJzZUNvbmZpZ1xyXG4gICAgd3JhcE9iamVjdChBbmd1bGFyUGFyc2UuQ29uZmlnLCBbJ2dldCddKTtcclxuXHJcbiAgICAvL0ZhY2Vib29rVXRpbHNcclxuICAgIHdyYXBPYmplY3QoQW5ndWxhclBhcnNlLkZhY2Vib29rVXRpbHMsIFsnbGluaycsICdsb2dJbicsICd1bmxpbmsnXSk7XHJcblxyXG4gICAgLy8gUGFyc2VGaWxlXHJcbiAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5GaWxlLnByb3RvdHlwZSwgWydzYXZlJ10pO1xyXG5cclxuICAgIC8vIFBhcnNlT2JqZWN0XHJcbiAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5PYmplY3QsIFsnZGVzdHJveUFsbCcsICdmZXRjaEFsbCcsICdmZXRjaEFsbElmTmVlZGVkJywgJ3NhdmVBbGwnXSk7XHJcbiAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5PYmplY3QucHJvdG90eXBlLCBbJ2Rlc3Ryb3knLCAnZmV0Y2gnLCAnc2F2ZSddKTtcclxuXHJcbiAgICAvLyBQYXJzZVByb21pc2VcclxuICAgIHdyYXBPYmplY3QoQW5ndWxhclBhcnNlLlByb21pc2UsIFsnX2NvbnRpbnVlV2hpbGUnLCAnYXMnLCAnZXJyb3InLCAnd2hlbiddKTtcclxuXHJcbiAgICAvLyBQYXJzZVB1c2hcclxuICAgIHdyYXBPYmplY3QoQW5ndWxhclBhcnNlLlB1c2gsIFsnc2VuZCddKTtcclxuXHJcbiAgICAvLyBQYXJzZVF1ZXJ5XHJcbiAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5RdWVyeS5wcm90b3R5cGUsIFsnY291bnQnLCAnZWFjaCcsICdmaW5kJywgJ2ZpcnN0JywgJ2dldCddKTtcclxuXHJcbiAgICAvLyBQYXJzZVNlc3Npb25cclxuICAgIHdyYXBPYmplY3QoQW5ndWxhclBhcnNlLlNlc3Npb24sIFsnY3VycmVudCddKTtcclxuXHJcbiAgICAvLyBQYXJzZVVzZXJcclxuICAgIHdyYXBPYmplY3QoQW5ndWxhclBhcnNlLlVzZXIsIFsnYmVjb21lJywgJ2N1cnJlbnRBc3luYycsICdlbmFibGVSZXZvY2FibGVTZXNzaW9uJywgJ2xvZ0luJywgJ2xvZ091dCcsICdyZXF1ZXN0UGFzc3dvcmRSZXNldCcsICdzaWduVXAnXSk7XHJcbiAgICB3cmFwT2JqZWN0KEFuZ3VsYXJQYXJzZS5Vc2VyLnByb3RvdHlwZSwgWydsb2dJbicsICdzaWduVXAnXSk7XHJcblxyXG4gICAgcmV0dXJuIEFuZ3VsYXJQYXJzZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBwcm92aWRlcjtcclxufVxyXG5cclxubmdQYXJzZU1vZHVsZVxyXG4gIC5wcm92aWRlcignUGFyc2UnLCBQYXJzZVByb3ZpZGVyKTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9QYXJzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gd2luZG93LmFuZ3VsYXI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIndpbmRvdy5hbmd1bGFyXCJcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9